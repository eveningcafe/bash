{# GLOBAL CONFIGURATION #}
global
  #chroot {{ ha_global.chroot }} 
  user {{ ha_global.user }} 
  group {{ ha_global.group }} 
  daemon
  log {{ haproxy_env.LOG_PATH }} local0
  log {{ haproxy_env.LOG_PATH }} local1 notice
  maxconn {{ ha_global.maxconn }} 
{% for cnf in ha_global.stats_cnf %}
  stats {{ cnf.opt }} {{ cnf.val }} 
{% endfor %}

{# DEFAULT CONFIGURATION #}
defaults
  log global
  mode {{ ha_defaults.mode }} 
{% for option in ha_defaults.options %}
  option {{ option }}
{% endfor %}
  retries {{ ha_defaults.retries }}
{% for cnf in ha_defaults.timeout_cnf %}
  timeout {{ cnf.opt }} {{ cnf.val }} 
{% endfor %}

{# LISTEN STATISTIC CONFIGURATION #}
listen stats
  bind {{ ha_stats.ip }}:{{ ha_stats.port }}
  mode {{ ha_stats.mode }}
{% for cnf in ha_stats.stats_cnf %}
  stats {{ cnf.opt }} {% if cnf.val is not none %}{{ cnf.val }}{% endif %}

{% endfor %}
